<!DOCTYPE html>
<html>
<head>
	<% include ../partials/header.ejs %>
	<!--Your own css file-->
	<title>You own title</title>
</head>

<body>
<% include ../partials/headline.ejs %>

<section class="main-content">
	<div class="container-fluid">
		<input id="inputFileToLoad" type="file" onchange="encodeImageFileAsURL();" />
	<div>
</section>


<% include ../partials/script.ejs %>

<!--Your own script-->
<script type='text/javascript'>
	function encodeImageFileAsURL() {

		$.ajax({
		url: "/testing_base64",
		type: "GET",
		success: function (mes) {
			alert(mes);
			console.log(mes);
			var xhr = new XMLHttpRequest();
			xhr.open("POST", "https://vision.googleapis.com/v1/images:annotate?key=AIzaSyC1bOumXTVe-xgDQNInDdk_V2xTPnFoie4");
			xhr.setRequestHeader("Content-Type", "application/json");
			xhr.send(JSON.stringify({"requests":[{"image":{"content":mes},"features": [{"type":"LABEL_DETECTION","maxResults":1}]}]}));
			//xhr.send(JSON.stringify({"requests":  [{ "features":  [ {"type": "LABEL_DETECTION"}], "image": {"content": encoded}}]}));
			xhr.onload = function() {
				alert(xhr.responseText);
			}	
		},
		error: function (err) {
			alert(err);
		}
		});
	}
  </script>

</body>
</html>